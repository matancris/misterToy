(this["webpackJsonpmister-toy"]=this["webpackJsonpmister-toy"]||[]).push([[0],{113:function(e,t,n){e.exports=n.p+"static/media/default.5a45102b.jpg"},157:function(e,t,n){e.exports=n(326)},212:function(e,t){},325:function(e,t,n){},326:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(9),c=n.n(o),i=n(14),s=n(15),u=n(16),l=n(20),p=n(19),m=n(24),d=n(18),f=n(70),y=n.n(f),h=y.a.create({withCredentials:!0}),v=function(e){return e.data},g={query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;e.name&&t.set("q",e.name);e.inStock&&t.set("inStock",e.inStock);e.type&&t.set("type",e.type);e.type&&t.set("sort",e.sortBy);return h.get("".concat("/api/toy","?").concat(t)).then(v)},getById:function(e){return h.get("".concat("/api/toy","/").concat(e)).then(v)},remove:function(e){return h.delete("".concat("/api/toy","/").concat(e))},save:function(e){return e._id?h.put("".concat("/api/toy","/").concat(e._id),e):h.post("/api/toy",e).then(v)}};function b(e){return function(t){g.query(e).then((function(e){t({type:"SET_TOYS",toys:e})}))}}function E(e){return function(t){g.save(e).then((function(e){t({type:"ADD_TOY",toy:e}),t({type:"NOTIFY",isShown:!0,msg:"Added seccessfuly"})}))}}var w=Object(d.b)((function(e){return{loggedinUser:e.userReducer.loggedinUser}}))((function(e){var t=e.toy,a=e.loggedinUser;return r.a.createElement("div",{className:"toy-preview card flex space-around column align-center"},r.a.createElement("img",{src:t.imgUrl?t.imgUrl:n(113),alt:""}),t.name,r.a.createElement("div",{className:"edit-toy-btns flex"},r.a.createElement(m.b,{to:"/toy/".concat(t._id)},"Details"),a&&a.isAdmin&&r.a.createElement(m.b,{to:"/toy/edit/".concat(t._id)},"Edit"),a&&a.isAdmin&&r.a.createElement("button",{onClick:function(){return e.onDeleteToy(t._id)}},"X")))}));function O(e){var t=e.toys,n=e.onDeleteToy;return r.a.createElement("div",{className:"toy-list flex flex-wrap justify-center"},t.map((function(e){return r.a.createElement(w,{toy:e,key:e._id,onDeleteToy:n})})))}var j=n(27),x=n(7),S=n(361),k=n(362),C=n(363),T=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={filter:{name:"",inStock:!1,type:"",sortBy:""}},e.handleChange=function(t){t.persist();var n="checkbox"===t.target.type?t.target.checked:t.target.value;e.setState((function(e){return{filter:Object(x.a)(Object(x.a)({},e.filter),{},Object(j.a)({},t.target.name,n))}}),(function(){e.props.onSetFilter(e.state.filter)}))},e.onFilter=function(t){t.preventDefault(),e.props.onSetFilter(e.state.filter)},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state.filter.name;return r.a.createElement("form",{onSubmit:this.onFilter,className:"form-filter flex space-evenely flex-1 align-center"},r.a.createElement(S.a,{type:"text",name:"name",label:"By name",id:"name",value:e,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"inStock"},"only in stock",r.a.createElement(k.a,{type:"checkbox",name:"inStock",id:"inStock",color:"primary",onChange:this.handleChange})),r.a.createElement(S.a,{id:"select",label:"type",style:{width:"60px"},select:!0},r.a.createElement(C.a,{value:""},"All"),r.a.createElement(C.a,{value:"Educational"},"Educational"),r.a.createElement(C.a,{value:"Funny"},"Funny"),r.a.createElement(C.a,{value:"Adult"},"Adult")),r.a.createElement("button",null,"Filter"))}}]),n}(a.Component),N=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={filterBy:"",sortBy:""},e.onSetFilter=function(t){e.setState({filterBy:t},(function(){return e.props.loadToys(e.state.filterBy)}))},e.onSetSort=function(t){e.setState({sortBy:t},(function(){return e.props.loadToys(e.state.sortBy)}))},e.onDelete=function(t){e.props.removeToy(t)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.loadToys()}},{key:"render",value:function(){var e=this.props,t=e.toys,n=e.loggedinUser;return t?r.a.createElement("div",null,r.a.createElement("div",{className:"add-filter flex align-center space-around"},n&&n.isAdmin&&r.a.createElement(m.b,{to:"/toy/edit",className:"add-btn"},"+"),r.a.createElement(T,{onSetFilter:this.onSetFilter})),r.a.createElement(O,{toys:t,onDeleteToy:this.onDelete})):r.a.createElement("div",null,"Loading...")}}]),n}(a.Component),I={loadToys:b,removeToy:function(e){return function(t){g.remove(e).then((function(){t({type:"REMOVE_TOY",id:e}),t({type:"NOTIFY",isShown:!0,msg:"Removed seccessfuly"})}))}},addToy:E},U=Object(d.b)((function(e){return{toys:e.toyReducer.toys,loggedinUser:e.userReducer.loggedinUser}}),I)(N),R=n(6),_=n.n(R),D=n(10),M=y.a.create({withCredentials:!0}),A=function(e,t){return Y(e,"GET",t)},B=function(e,t){return Y(e,"POST",t)},F=function(e,t){return Y(e,"PUT",t)},L=function(e,t){return Y(e,"DELETE",t)};function Y(e){return V.apply(this,arguments)}function V(){return(V=Object(D.a)(_.a.mark((function e(t){var n,a,r,o=arguments;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"get",a=o.length>2&&void 0!==o[2]?o[2]:null,e.prev=2,e.next=5,M({url:"".concat("/api/").concat(t),method:n,data:a});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(n,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(a)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/#/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var W={add:function(e){return P.apply(this,arguments)},query:function(e){if(e)var t="?toyId=".concat(e.toyId);return A("review".concat(t||""))},remove:function(e){return L("review/".concat(e))}};function P(){return(P=Object(D.a)(_.a.mark((function e(t){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B("review",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={review:{toyId:"",rate:0,content:""}},e.elInput=r.a.createRef(),e.onInputChange=function(t){e.setState({review:Object(x.a)(Object(x.a)({},e.state.review),{},Object(j.a)({},t.target.name,t.target.value))})},e.submitReview=function(t){t.preventDefault(),e.props.addReview(e.state.review)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.setState({review:{toyId:this.props.toyId}})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{className:"review-form flex column align-center",onSubmit:this.submitReview},r.a.createElement("h4",null,"rate this toy!"),r.a.createElement("select",{name:"rate",id:"",className:"rating-drop",onChange:this.onInputChange},r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"3"},"3"),r.a.createElement("option",{value:"4"},"4"),r.a.createElement("option",{value:"5"},"5")),r.a.createElement("textarea",{name:"content",id:"",cols:"30",rows:"5",placeholder:"write your review here",onChange:this.onInputChange}),r.a.createElement("button",{className:"review-btn"},"submit")))}}]),n}(r.a.Component),H={addReview:function(e){return function(){var t=Object(D.a)(_.a.mark((function t(n){var a;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,W.add(e);case 3:a=t.sent,console.log("addReview -> addedReview",a),n({type:"REVIEW_ADD",review:a}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("ReviewActions: err in addReview",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}},z=Object(d.b)((function(e){return{}}),H)(q);function J(e){return e.review?r.a.createElement("ul",{className:"review-container"},r.a.createElement("li",{className:"flex justify-center column align-center"},r.a.createElement("h2",null,"\u2b50".repeat(e.review.rate)),r.a.createElement("p",null,'"',e.review.content,'"'))):"Be the first one to give a review!"}function G(e){var t=e.reviews;return t.length&&t?r.a.createElement("div",{className:"review-list flex flex-wrap justify-center"},t.map((function(e){return r.a.createElement(J,{review:e,key:e._id})}))):r.a.createElement("div",null,"No reviews yet")}var X,$=n(77),K=n(147),Q=n.n(K),Z={setup:function(){X=Q()("/")},terminate:function(){X=null},on:function(e,t){X.on(e,t)},off:function(e,t){X.off(e,t)},emit:function(e,t){X.emit(e,t)}};var ee=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={msg:{from:"Me",txt:""},msgs:[],topic:"",isTyping:!1,typingMsg:""},e.onTyping=function(t){e.setState({typingMsg:t})},e.addMsg=function(t){e.setState((function(e){return{msgs:[].concat(Object($.a)(e.msgs),[t])}}))},e.sendMsg=function(t){t.preventDefault(),Z.emit("chat newMsg",e.state.msg),e.setState({msg:{from:e.props.username,txt:""}})},e.timeoutFunction=function(){e.setState({isTyping:!1}),Z.emit("chat typing","")},e.msgHandleChange=function(){var t=Object(D.a)(_.a.mark((function t(n){var a,r,o,c,i,s;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.state.isTyping?(clearTimeout(a),a=setTimeout(e.timeoutFunction,1e3)):(clearTimeout(a),e.setState({isTyping:!0}),r=e.props.username,o=r+" is typing...",Z.emit("chat typing",o),a=setTimeout(e.timeoutFunction,1e3)),c=n.target,i=c.name,s=c.value,t.next=4,e.setState((function(e){return{msg:Object(x.a)(Object(x.a)({},e.msg),{},Object(j.a)({},i,s))}}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.setState({topic:this.props.toyId,msg:{from:this.props.username,txt:""}}),Z.setup(),Z.emit("chat topic",this.state.topic),Z.on("chat addMsg",this.addMsg),Z.on("chat typing",this.onTyping)}},{key:"componentWillUnmount",value:function(){Z.off("chat addMsg",this.addMsg),Z.terminate()}},{key:"render",value:function(){return r.a.createElement("div",{className:"chat-room flex column space-between align-center"},r.a.createElement("h2",null,"Chat about this toy!"),r.a.createElement("div",{style:{height:"30px",lineHeight:0}},this.state.typingMsg&&r.a.createElement("h3",null,this.state.typingMsg)),r.a.createElement("ul",{className:"clean-list flex column"},this.state.msgs.map((function(e,t){return r.a.createElement("li",{key:t},"".concat(e.from,": ").concat(e.txt))}))),r.a.createElement("form",{className:"flex",onSubmit:this.sendMsg},r.a.createElement("input",{autoComplete:"off",type:"text",value:this.state.msg.txt,onChange:this.msgHandleChange,name:"txt"}),r.a.createElement("button",null,"Send")))}}]),n}(a.Component),te=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={toy:null,loggedinUser:""},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.loadToy(),this.loadReviews()}},{key:"loadReviews",value:function(){var e=this.props.match.params.toyId;this.props.loadReviews({toyId:e})}},{key:"loadToy",value:function(){var e=Object(D.a)(_.a.mark((function e(){var t,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.toyId,e.next=3,g.getById(t);case 3:n=e.sent,this.setState({toy:n});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.toy,t=this.props.loggedinUser;return e?r.a.createElement("div",{className:"toy-details flex column justufy-center align-center"},r.a.createElement("div",{className:"chat-details-container flex space-around"},r.a.createElement("img",{src:e.imgUrl?e.imgUrl:n(113),alt:""}),r.a.createElement("div",{className:"details-container flex column justify-center align-center"},r.a.createElement("h1",null,"name: ",e.name),r.a.createElement("h1",null,"price: $",e.price),r.a.createElement("h1",null,"type: ",e.type),r.a.createElement("h1",null,"in stock? ",e.inStock?"yes":"no")),t&&r.a.createElement(ee,{toyId:e._id,username:this.props.loggedinUser.username})),r.a.createElement(G,{reviews:this.props.reviews}),r.a.createElement(z,{toyId:e._id}),r.a.createElement(m.b,{to:"/toy"},"Back to list")):r.a.createElement("div",null,"Loading...")}}]),a}(a.Component),ne={loadReviews:function(e){return function(){var t=Object(D.a)(_.a.mark((function t(n){var a;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,W.query(e);case 3:a=t.sent,n({type:"SET_REVIEWS",reviews:a}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("ReviewActions: err in loadReviews",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},ae=Object(d.b)((function(e){return{reviews:e.reviewReducer.reviews,loggedinUser:e.userReducer.loggedinUser}}),ne)(te),re=n(42),oe=n(358),ce={uploadImg:function(e){return ie.apply(this,arguments)}};function ie(){return(ie=Object(D.a)(_.a.mark((function e(t){var n,a,r,o;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"dawzeno7k",n="https://api.cloudinary.com/v1_1/".concat("dawzeno7k","/image/upload"),a=new FormData,console.dir(t.target),a.append("file",t.target.files[0]),a.append("upload_preset","fvxb6by1"),e.prev=6,e.next=9,fetch(n,{method:"POST",body:a});case 9:return r=e.sent,e.next=12,r.json();case 12:return o=e.sent,e.abrupt("return",o);case 16:e.prev=16,e.t0=e.catch(6),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[6,16]])})))).apply(this,arguments)}var se=function(e){return r.a.createElement(S.a,Object.assign({variant:"outlined"},e,{label:e.name}))},ue=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={toy:null},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.toyId;t?g.getById(t).then((function(t){e.setState({toy:t})})):this.setState({toy:{name:"",price:"",type:""}})}},{key:"componentDidUpdate",value:function(e,t){var n=this;if(e.match.params.toyId!==this.props.match.params.toyId)return g.getById(this.props.match.params.toyId).then((function(e){n.setState({toy:e})}))}},{key:"onUpdateImg",value:function(){var e=Object(D.a)(_.a.mark((function e(t){var n,a,r=this;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.uploadImg(t);case 2:n=e.sent,(a=Object(x.a)({},this.state.toy)).imgUrl=n.secure_url,this.setState({toy:a},(function(){return r.props.editToy(a)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.toy;return t?r.a.createElement("div",null,r.a.createElement(re.d,{initialValues:{name:t.name,price:t.price,type:t.type},validate:function(e){},onSubmit:function(n,a){var r=a.setSubmitting;e.setState({toy:Object(x.a)(Object(x.a)({},t),n)},(function(){e.props.addToy(e.state.toy),r(!1)})),e.props.history.push("/toy")}},(function(t){var n=t.isSubmitting;return r.a.createElement(re.c,{className:"flex column justify-center align-center"},r.a.createElement("h1",null,"Add new Toy"),r.a.createElement(re.b,{type:"text",name:"name",as:se}),r.a.createElement(re.a,{name:"name",component:"span"}),r.a.createElement(re.b,{type:"number",name:"price",as:se}),r.a.createElement(re.a,{name:"price",component:"span"}),r.a.createElement(re.b,{as:"select",name:"type"},r.a.createElement("option",{value:""}),r.a.createElement("option",{value:"Adult"},"Adult"),r.a.createElement("option",{value:"Educational"},"Educational"),r.a.createElement("option",{value:"Funny"},"Funny")),r.a.createElement("label",{style:{cursor:"pointer"}}," Upload Photo!",r.a.createElement("input",{onChange:function(t){return e.onUpdateImg(t)},type:"file",hidden:!0})),r.a.createElement(oe.a,{type:"submit",disabled:n},"Submit"),r.a.createElement(oe.a,{type:"submit",onClick:function(){return e.props.history.goBack()}},"back"))}))):r.a.createElement("h1",null,"loading")}}]),n}(a.Component),le={loadToys:b,addToy:E,editToy:function(e){return function(t){g.save(e).then((function(e){t({type:"EDIT_TOY",toy:e}),t({type:"NOTIFY",isShown:!0,msg:"Added seccessfuly"})}))}}},pe=Object(d.b)((function(e){return{toys:e.toyReducer.toys}}),le)(ue),me=n(101),de=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).getToysDataByType=function(){return e.props.toys.reduce((function(e,t){return"Adult"===t.type?e[0]+=+t.price:"Educational"===t.type?e[1]+=+t.price:"Funny"===t.type&&(e[2]+=+t.price),e}),[0,0,0])},e.getToysDataByYear=function(){var t=e.props.toys.reduce((function(e,t){var n=new Date(t.createdAt).getFullYear();return e[n]=e[n]?e[n]+1:1,e}),{});return{years:Object.keys(t),values:Object.values(t)}},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.loadToys()}},{key:"render",value:function(){if(!this.props.toys.length)return r.a.createElement("h1",null,"loading");var e={labels:["Adult","Educational","Funny"],datasets:[{label:"Sales per year",backgroundColor:["#b2f0d4","#2d30b4","#88ccd9"],borderColor:"rgba(255,99,132,1)",borderWidth:1,hoverBackgroundColor:"#6ceff0",data:this.getToysDataByType()}]},t=this.getToysDataByYear(),n={labels:t.years,datasets:[{label:"Sales per year",backgroundColor:"lightBlue",borderColor:"rgba(255,99,132,1)",borderWidth:1,hoverBackgroundColor:"rgba(255,99,132,0.4)",hoverBorderColor:"rgba(255,99,132,1)",data:t.values}]};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"welcome-div flex column"},r.a.createElement("div",{className:"welcome-txt flex column justify-center"},r.a.createElement("h1",null,"Welcome to ",r.a.createElement("span",null,"MisterToy")),r.a.createElement("p",null,"our toys are the best on the planet! Lorem ipsum dolor sit amet consectetur adipisicing elit. Voluptatum atque dolores optio saepe repellendus, corporis, possimus quod nemo dicta ratione explicabo unde? Minima, nulla ea! Ut vitae repudiandae reiciendis natus."))),r.a.createElement("div",{className:"chart-container flex flex-wrap"},r.a.createElement(me.Pie,{data:e}),r.a.createElement(me.Line,{data:n})))}}]),n}(a.Component),fe={loadToys:b,addToy:E},ye=Object(d.b)((function(e){return{toys:e.toyReducer.toys}}),fe)(de),he=n(55),ve=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={center:{},store1Coord:{lat:32.0853,lng:34.7818},store2Coord:{lat:32.790509,lng:34.967076},store3Coord:{lat:33.0042,lng:35.08751}},e.centerByStor=function(t){e.setState({center:e.state[t]})},e.onMarkerClick=function(t,n,a){console.log("props:",t," marker:",n,"event",a);var r={lat:t.position.lat,lng:t.position.lng};e.setState({center:r})},e.onMapClicked=function(t,n,a){console.log("mapProps:",t),console.log("map:",n),console.log("clickEvent:",a),e.setState({lat:a.latLng.lat(),lng:a.latLng.lng()})},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"map-container"},r.a.createElement(he.Map,{containerStyle:{position:"relative",width:"100%",height:"500px",border:"2px solid black",marginBottom:"10px",boxShadow:"15px 11px 9px 2px rgba(112,110,112,0.45)"},initialCenter:this.state.store2Coord,center:this.state.center,onClick:this.onMapClicked,google:this.props.google,zoom:8},r.a.createElement(he.Marker,{position:this.state.store1Coord,name:"store 1 location",onClick:function(){return e.onMarkerClick}}),r.a.createElement(he.Marker,{position:this.state.store2Coord,name:"store 2 location",onClick:function(){return e.onMarkerClick}}),r.a.createElement(he.Marker,{position:this.state.store3Coord,name:"store 3 location",onClick:function(){return e.onMarkerClick}}),r.a.createElement("div",{className:"location-btns flex space-around"},r.a.createElement(oe.a,{variant:"contained",color:"primary",onClick:function(){return e.centerByStor("store2Coord")}},"Haifa Stor"),r.a.createElement(oe.a,{variant:"contained",color:"primary",onClick:function(){return e.centerByStor("store3Coord")}},"Naharya Stor"),r.a.createElement(oe.a,{variant:"contained",color:"primary",onClick:function(){return e.centerByStor("store1Coord")}},"TLV Stor"))))}}]),n}(r.a.Component),ge=Object(he.GoogleApiWrapper)({apiKey:"AIzaSyA7wFxeGayDFtxLfft53sDr7sMu9cj7Vio"})(ve);function be(){return r.a.createElement("div",null,r.a.createElement("div",{className:"map-container"},r.a.createElement(ge,null)))}var Ee=n(359),we=n(360),Oe={login:function(e){return je.apply(this,arguments)},logout:function(){return Se.apply(this,arguments)},signup:function(e){return xe.apply(this,arguments)},getUsers:function(){return A("user")},getById:function(e){return A("user/".concat(e))},remove:function(e){return L("user/".concat(e))},update:function(e){return F("user/".concat(e._id),e)}};function je(){return(je=Object(D.a)(_.a.mark((function e(t){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B("auth/login",t);case 2:return n=e.sent,e.abrupt("return",ke(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(){return(xe=Object(D.a)(_.a.mark((function e(t){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B("auth/signup",t);case 2:return n=e.sent,e.abrupt("return",ke(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(){return(Se=Object(D.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B("auth/logout");case 2:sessionStorage.clear();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e){return sessionStorage.setItem("user",JSON.stringify(e)),e}var Ce={logout:function(){return function(){var e=Object(D.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.logout();case 2:t({type:"SET_USER",user:null});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Te=Object(d.b)((function(e){return{loggedinUser:e.userReducer.loggedinUser}}),Ce)(Object(i.f)((function(e){function t(){return(t=Object(D.a)(_.a.mark((function t(){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.logout();case 2:e.history.push("/");case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var n=e.loggedinUser;return r.a.createElement(Ee.a,{position:"static",className:"app-material-bar full main-container"},r.a.createElement(we.a,{className:"main-nav flex space-between"},r.a.createElement(m.b,{to:"/",className:"logo"},"MisterToy"),n&&r.a.createElement("h1",null,"Hello ",n.username,"!"),r.a.createElement("ul",{className:"main-nav flex clean-list"},r.a.createElement(m.b,{to:"/toy"},r.a.createElement("div",{className:"logo"},"toys")),r.a.createElement(m.b,{to:"/about"},r.a.createElement("div",{className:"logo"},"about")),!n&&r.a.createElement(m.b,{to:"/login"},"Login"),!n&&r.a.createElement(m.b,{to:"/signup"},"Signup"),n&&r.a.createElement("button",{onClick:function(){return function(){return t.apply(this,arguments)}()}},"Logout"))))}))),Ne=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={user:{username:"",password:""}},e.onChange=function(t){e.setState({user:Object(x.a)(Object(x.a)({},e.state.user),{},Object(j.a)({},t.target.name,t.target.value))})},e.onLogin=function(){var t=Object(D.a)(_.a.mark((function t(n){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,e.props.login(e.state.user);case 3:e.props.history.push("/toy");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"flex column"},r.a.createElement("form",{className:"flex space-between align-center column",onSubmit:this.onLogin},r.a.createElement("h1",null,"Login"),r.a.createElement("input",{type:"text",name:"username",onChange:this.onChange,placeholder:"Your user name"}),r.a.createElement("input",{type:"password",name:"password",onChange:this.onChange,placeholder:"password"}),r.a.createElement("button",{className:"submit"},"submit")))}}]),n}(r.a.Component),Ie={login:function(e){return function(){var t=Object(D.a)(_.a.mark((function t(n){var a;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Oe.login(e);case 2:a=t.sent,n({type:"SET_USER",user:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},Ue=Object(d.b)((function(e){return{loggedinUser:e.userReducer.loggedinUser}}),Ie)(Ne),Re=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={user:{username:"",fullName:"",password:""}},e.onChange=function(t){e.setState({user:Object(x.a)(Object(x.a)({},e.state.user),{},Object(j.a)({},t.target.name,t.target.value))})},e.onSignup=function(){var t=Object(D.a)(_.a.mark((function t(n){var a,r,o,c,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a=e.state.user,r=a.username,o=a.fullName,c=a.password,r&&o&&c){t.next=4;break}return t.abrupt("return");case 4:return i={username:r,fullName:o,password:c},t.next=7,e.props.signup(i);case 7:e.setState({user:{username:"",fullName:"",password:""}},(function(){return e.props.history.push("/toy")}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("form",{className:"signup-form flex column align-center",onSubmit:this.onSignup},r.a.createElement("h1",null,"Signup"),r.a.createElement("input",{name:"fullName",type:"text",placeholder:"full Name",onChange:this.onChange}),r.a.createElement("input",{name:"username",type:"text",placeholder:"User Name",onChange:this.onChange}),r.a.createElement("input",{name:"password",type:"password",placeholder:"Password",onChange:this.onChange}),r.a.createElement("button",null,"Signup"))}}]),n}(r.a.Component),_e={signup:function(e){return function(){var t=Object(D.a)(_.a.mark((function t(n){var a;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Oe.signup(e);case 2:a=t.sent,n({type:"SET_USER",user:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},De=Object(d.b)((function(e){return{user:e.userReducer.loggedinUser}}),_e)(Re);var Me=function(){return r.a.createElement("div",{className:"App main-container"},r.a.createElement(Te,null),r.a.createElement("main",{className:"full main-container"},r.a.createElement(i.c,null,r.a.createElement(i.a,{component:pe,path:"/toy/edit/:toyId?"}),r.a.createElement(i.a,{component:ae,path:"/toy/:toyId"}),r.a.createElement(i.a,{component:U,path:"/toy"}),r.a.createElement(i.a,{component:Ue,path:"/login"}),r.a.createElement(i.a,{component:De,path:"/signup"}),r.a.createElement(i.a,{component:be,path:"/about"}),r.a.createElement(i.a,{component:ye,path:"/"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ae=n(48),Be=n(150),Fe={reviews:[]},Le={toys:[]};var Ye=null;sessionStorage.user&&(Ye=JSON.parse(sessionStorage.user));var Ve={loggedinUser:Ye};var We=Object(Ae.c)({toyReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOYS":return Object(x.a)(Object(x.a)({},e),{},{toys:t.toys});case"REMOVE_TOY":var n=e.toys.filter((function(e){return e._id!==t.id}));return Object(x.a)(Object(x.a)({},e),{},{toys:n});case"ADD_TOY":var a=e.toys.slice();return a.push(t.toy),Object(x.a)(Object(x.a)({},e),{},{toys:a});case"EDIT_TOY":var r=e.toys.findIndex((function(e){return e._id===t.toy._id})),o=e.toys.slice();return o[r]=t.toy,Object(x.a)(Object(x.a)({},e),{},{toys:o});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return Object(x.a)(Object(x.a)({},e),{},{loggedinUser:t.user});case"UPDATE_USER":return Object(x.a)(Object(x.a)({},e),{},{loggedinUser:t.loggedinUser});default:return e}},reviewReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_REVIEWS":return Object(x.a)(Object(x.a)({},e),{},{reviews:t.reviews});case"REVIEW_ADD":return Object(x.a)(Object(x.a)({},e),{},{reviews:[].concat(Object($.a)(e.reviews),[t.review])});case"REVIEW_UPDATE":return Object(x.a)(Object(x.a)({},e),{},{reviews:e.reviews.map((function(e){return e._id===t.review._id?t.review:e}))});default:return e}}}),Pe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ae.d,qe=Object(Ae.e)(We,Pe(Object(Ae.a)(Be.a)));n(325);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(d.a,{store:qe},r.a.createElement(m.a,null,r.a.createElement(Me,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[157,1,2]]]);
//# sourceMappingURL=main.f1192dff.chunk.js.map